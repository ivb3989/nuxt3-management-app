import{a as f,r as p,b as c,w as _,e as b,f as h,h as v,i as t,t as w,u as x,j as g,v as y,k as S,o as k,l as U}from"./entry.3d511b6e.js";const B=["onSubmit"],D={class:"text-xl font-bold"},M={class:"flex justify-between items-center mt-20"},j=t("label",null,"Username",-1),C=t("input",{type:"submit",value:"Update",class:"mt-12 px-4 py-2 rounded bg-blue-500 hover:bg-blue-400 text-white font-semibold text-center block w-full focus:outline-none focus:ring focus:ring-offset-2 focus:ring-blue-500 focus:ring-opacity-80 cursor-pointer"},null,-1),V={__name:"account",async setup(E){let s,u;const i=f(),a=p(""),n=c(),{data:l}=([s,u]=_(()=>i.from("profiles").select("username").eq("id",n.value.id).single()),s=await s,u(),s);l&&(a.value=l.username);async function m(){try{const o={id:c().value.id,username:a.value,updated_at:new Date},{error:e}=await i.from("profiles").upsert(o,{returning:"minimal"});if(e)throw e}catch(r){alert(r.message)}}return b(()=>{h(()=>{n.value||U("/")})}),(r,o)=>{var e;return k(),v("form",{class:"border p-8 mx-4 mt-12 min-w-min max-w-md mx-auto",onSubmit:S(m,["prevent"])},[t("h1",D,"Hello "+w((e=x(n))==null?void 0:e.email),1),t("div",M,[j,g(t("input",{"onUpdate:modelValue":o[0]||(o[0]=d=>a.value=d),type:"text",class:"text-gray-400 p-2 ml-4 border w-60",placeholder:"username"},null,512),[[y,a.value]])]),C],40,B)}}};export{V as default};
